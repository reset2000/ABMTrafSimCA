\doxysection{BFloat16.\+h}
\hypertarget{_b_float16_8h_source}{}\label{_b_float16_8h_source}\index{Eigen/src/Core/arch/Default/BFloat16.h@{Eigen/src/Core/arch/Default/BFloat16.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ Copyright\ 2017\ The\ TensorFlow\ Authors.\ All\ Rights\ Reserved.}}
\DoxyCodeLine{00002\ \textcolor{comment}{}}
\DoxyCodeLine{00003\ \textcolor{comment}{Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00004\ \textcolor{comment}{you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00005\ \textcolor{comment}{You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00006\ \textcolor{comment}{}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00008\ \textcolor{comment}{}}
\DoxyCodeLine{00009\ \textcolor{comment}{Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00010\ \textcolor{comment}{distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00011\ \textcolor{comment}{WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00012\ \textcolor{comment}{See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00013\ \textcolor{comment}{limitations\ under\ the\ License.}}
\DoxyCodeLine{00014\ \textcolor{comment}{==============================================================================*/}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#ifndef\ EIGEN\_BFLOAT16\_H}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#define\ EIGEN\_BFLOAT16\_H}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#define\ BF16\_PACKET\_FUNCTION(PACKET\_F,\ PACKET\_BF16,\ METHOD)\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\ \ template\ <>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\ \ EIGEN\_DEFINE\_FUNCTION\_ALLOWING\_MULTIPLE\_DEFINITIONS\ EIGEN\_UNUSED\ \ \(\backslash\)}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\ \ PACKET\_BF16\ METHOD<PACKET\_BF16>(const\ PACKET\_BF16\&\ \_x)\ \{\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\ \ \ \ return\ F32ToBf16(METHOD<PACKET\_F>(Bf16ToF32(\_x)));\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_eigen}{Eigen}}\ \{}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{keyword}{struct\ }bfloat16;}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{namespace\ }bfloat16\_impl\ \{}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{comment}{//\ Make\ our\ own\ \_\_bfloat16\_raw\ definition.}}
\DoxyCodeLine{00033\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1____bfloat16__raw}{\_\_bfloat16\_raw}}\ \{}
\DoxyCodeLine{00034\ \ \ EIGEN\_DEVICE\_FUNC\ EIGEN\_CONSTEXPR\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1____bfloat16__raw}{\_\_bfloat16\_raw}}()\ :\ value(0)\ \{\}}
\DoxyCodeLine{00035\ \ \ \textcolor{keyword}{explicit}\ EIGEN\_DEVICE\_FUNC\ EIGEN\_CONSTEXPR\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1____bfloat16__raw}{\_\_bfloat16\_raw}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{raw}})\ :\ value(\mbox{\hyperlink{class_eigen_1_1_matrix_base}{raw}})\ \{\}}
\DoxyCodeLine{00036\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ value;}
\DoxyCodeLine{00037\ \};}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ EIGEN\_CONSTEXPR\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1____bfloat16__raw}{\_\_bfloat16\_raw}}\ raw\_uint16\_to\_bfloat16(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ value);}
\DoxyCodeLine{00040\ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ AssumeArgumentIsNormalOrInfinityOrZero>}
\DoxyCodeLine{00041\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1____bfloat16__raw}{\_\_bfloat16\_raw}}\ float\_to\_bfloat16\_rtne(\textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{ff}});}
\DoxyCodeLine{00042\ \textcolor{comment}{//\ Forward\ declarations\ of\ template\ specializations,\ to\ avoid\ Visual\ C++\ 2019\ errors,\ saying:}}
\DoxyCodeLine{00043\ \textcolor{comment}{//\ >\ error\ C2908:\ explicit\ specialization;\ 'float\_to\_bfloat16\_rtne'\ has\ already\ been\ instantiated}}
\DoxyCodeLine{00044\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00045\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1____bfloat16__raw}{\_\_bfloat16\_raw}}\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{float\_to\_bfloat16\_rtne<false>}}(\textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{ff}});}
\DoxyCodeLine{00046\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00047\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1____bfloat16__raw}{\_\_bfloat16\_raw}}\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{float\_to\_bfloat16\_rtne<true>}}(\textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{ff}});}
\DoxyCodeLine{00048\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ \textcolor{keywordtype}{float}\ bfloat16\_to\_float(\mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1____bfloat16__raw}{\_\_bfloat16\_raw}}\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{h}});}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1bfloat16__base}{bfloat16\_base}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1____bfloat16__raw}{\_\_bfloat16\_raw}}\ \{}
\DoxyCodeLine{00051\ \ \ EIGEN\_DEVICE\_FUNC\ EIGEN\_CONSTEXPR\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1bfloat16__base}{bfloat16\_base}}()\ \{\}}
\DoxyCodeLine{00052\ \ \ EIGEN\_DEVICE\_FUNC\ EIGEN\_CONSTEXPR\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1bfloat16__base}{bfloat16\_base}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1____bfloat16__raw}{\_\_bfloat16\_raw}}\&\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{h}})\ :\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1____bfloat16__raw}{\_\_bfloat16\_raw}}(\mbox{\hyperlink{class_eigen_1_1_matrix_base}{h}})\ \{\}}
\DoxyCodeLine{00053\ \};}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \}\ \textcolor{comment}{//\ namespace\ bfloat16\_impl}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \textcolor{comment}{//\ Class\ definition.}}
\DoxyCodeLine{00058\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_eigen_1_1bfloat16}{bfloat16}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1bfloat16__base}{bfloat16\_impl::bfloat16\_base}}\ \{}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1____bfloat16__raw}{bfloat16\_impl::\_\_bfloat16\_raw}}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1____bfloat16__raw}{\_\_bfloat16\_raw}};}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ EIGEN\_DEVICE\_FUNC\ EIGEN\_CONSTEXPR\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{bfloat16}}()\ \{\}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ EIGEN\_DEVICE\_FUNC\ EIGEN\_CONSTEXPR\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{bfloat16}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1____bfloat16__raw}{\_\_bfloat16\_raw}}\&\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{h}})\ :\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1bfloat16__base}{bfloat16\_impl::bfloat16\_base}}(\mbox{\hyperlink{class_eigen_1_1_matrix_base}{h}})\ \{\}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \textcolor{keyword}{explicit}\ EIGEN\_DEVICE\_FUNC\ EIGEN\_CONSTEXPR\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{bfloat16}}(\textcolor{keywordtype}{bool}\ b)}
\DoxyCodeLine{00067\ \ \ \ \ \ \ :\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1bfloat16__base}{bfloat16\_impl::bfloat16\_base}}(bfloat16\_impl::raw\_uint16\_to\_bfloat16(b\ ?\ 0x3f80\ :\ 0))\ \{\}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ T>}
\DoxyCodeLine{00070\ \ \ \textcolor{keyword}{explicit}\ EIGEN\_DEVICE\_FUNC\ EIGEN\_CONSTEXPR\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{bfloat16}}(\mbox{\hyperlink{class_eigen_1_1_matrix_base}{T}}\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{val}})}
\DoxyCodeLine{00071\ \ \ \ \ \ \ :\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1bfloat16__base}{bfloat16\_impl::bfloat16\_base}}(bfloat16\_impl::float\_to\_bfloat16\_rtne<\mbox{\hyperlink{struct_eigen_1_1internal_1_1is__integral}{internal::is\_integral<T>::value}}>(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(\mbox{\hyperlink{class_eigen_1_1_matrix_base}{val}})))\ \{\}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \textcolor{keyword}{explicit}\ EIGEN\_DEVICE\_FUNC\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{bfloat16}}(\textcolor{keywordtype}{float}\ f)}
\DoxyCodeLine{00074\ \ \ \ \ \ \ :\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1bfloat16__base}{bfloat16\_impl::bfloat16\_base}}(bfloat16\_impl::float\_to\_bfloat16\_rtne<false>(f))\ \{\}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \textcolor{comment}{//\ Following\ the\ convention\ of\ numpy,\ converting\ between\ complex\ and}}
\DoxyCodeLine{00077\ \ \ \textcolor{comment}{//\ float\ will\ lead\ to\ loss\ of\ imag\ value.}}
\DoxyCodeLine{00078\ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ RealScalar>}
\DoxyCodeLine{00079\ \ \ \textcolor{keyword}{explicit}\ EIGEN\_DEVICE\_FUNC\ EIGEN\_CONSTEXPR\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{bfloat16}}(\textcolor{keyword}{const}\ std::complex<RealScalar>\&\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{val}})}
\DoxyCodeLine{00080\ \ \ \ \ \ \ :\ \mbox{\hyperlink{struct_eigen_1_1bfloat16__impl_1_1bfloat16__base}{bfloat16\_impl::bfloat16\_base}}(bfloat16\_impl::float\_to\_bfloat16\_rtne<false>(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(\mbox{\hyperlink{class_eigen_1_1_matrix_base}{val}}.real())))\ \{\}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ EIGEN\_DEVICE\_FUNC\ \textcolor{keyword}{operator}\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{float}}()\textcolor{keyword}{\ const\ }\{\ \ \textcolor{comment}{//\ NOLINT:\ Allow\ implicit\ conversion\ to\ float,\ because\ it\ is\ lossless.}}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordflow}{return}\ bfloat16\_impl::bfloat16\_to\_float(*\textcolor{keyword}{this});}
\DoxyCodeLine{00084\ \ \ \}}
\DoxyCodeLine{00085\ \};}
\DoxyCodeLine{00086\ \}\ \textcolor{comment}{//\ namespace\ Eigen}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \textcolor{keyword}{namespace\ }std\ \{}
\DoxyCodeLine{00089\ \textcolor{keyword}{template}<>}
\DoxyCodeLine{00090\ \textcolor{keyword}{struct\ }numeric\_limits<\mbox{\hyperlink{namespace_eigen}{Eigen}}::bfloat16>\ \{}
\DoxyCodeLine{00091\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ is\_specialized\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00092\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ is\_signed\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00093\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ is\_integer\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00094\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ is\_exact\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00095\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ has\_infinity\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00096\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ has\_quiet\_NaN\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00097\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ has\_signaling\_NaN\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00098\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ float\_denorm\_style\ has\_denorm\ =\ std::denorm\_absent;}
\DoxyCodeLine{00099\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ has\_denorm\_loss\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00100\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ std::float\_round\_style\ round\_style\ =\ numeric\_limits<float>::round\_style;}
\DoxyCodeLine{00101\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ is\_iec559\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00102\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ is\_bounded\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00103\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ is\_modulo\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00104\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ digits\ =\ 8;}
\DoxyCodeLine{00105\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ digits10\ =\ 2;}
\DoxyCodeLine{00106\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ max\_digits10\ =\ 4;}
\DoxyCodeLine{00107\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ radix\ =\ 2;}
\DoxyCodeLine{00108\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ min\_exponent\ =\ numeric\_limits<float>::min\_exponent;}
\DoxyCodeLine{00109\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ min\_exponent10\ =\ numeric\_limits<float>::min\_exponent10;}
\DoxyCodeLine{00110\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ max\_exponent\ =\ numeric\_limits<float>::max\_exponent;}
\DoxyCodeLine{00111\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ max\_exponent10\ =\ numeric\_limits<float>::max\_exponent10;}
\DoxyCodeLine{00112\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ traps\ =\ numeric\_limits<float>::traps;}
\DoxyCodeLine{00113\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ tinyness\_before\ =\ numeric\_limits<float>::tinyness\_before;}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\ (min)()\ \{\ \textcolor{keywordflow}{return}\ Eigen::bfloat16\_impl::raw\_uint16\_to\_bfloat16(0x0080);\ \}}
\DoxyCodeLine{00116\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\ lowest()\ \{\ \textcolor{keywordflow}{return}\ Eigen::bfloat16\_impl::raw\_uint16\_to\_bfloat16(0xff7f);\ \}}
\DoxyCodeLine{00117\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\ (max)()\ \{\ \textcolor{keywordflow}{return}\ Eigen::bfloat16\_impl::raw\_uint16\_to\_bfloat16(0x7f7f);\ \}}
\DoxyCodeLine{00118\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\ epsilon()\ \{\ \textcolor{keywordflow}{return}\ Eigen::bfloat16\_impl::raw\_uint16\_to\_bfloat16(0x3c00);\ \}}
\DoxyCodeLine{00119\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\ round\_error()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}(0x3f00);\ \}}
\DoxyCodeLine{00120\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\ infinity()\ \{\ \textcolor{keywordflow}{return}\ Eigen::bfloat16\_impl::raw\_uint16\_to\_bfloat16(0x7f80);\ \}}
\DoxyCodeLine{00121\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\ quiet\_NaN()\ \{\ \textcolor{keywordflow}{return}\ Eigen::bfloat16\_impl::raw\_uint16\_to\_bfloat16(0x7fc0);\ \}}
\DoxyCodeLine{00122\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\ signaling\_NaN()\ \{\ \textcolor{keywordflow}{return}\ Eigen::bfloat16\_impl::raw\_uint16\_to\_bfloat16(0x7f81);\ \}}
\DoxyCodeLine{00123\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\ denorm\_min()\ \{\ \textcolor{keywordflow}{return}\ Eigen::bfloat16\_impl::raw\_uint16\_to\_bfloat16(0x0001);\ \}}
\DoxyCodeLine{00124\ \};}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \textcolor{comment}{//\ If\ std::numeric\_limits<T>\ is\ specialized,\ should\ also\ specialize}}
\DoxyCodeLine{00127\ \textcolor{comment}{//\ std::numeric\_limits<const\ T>,\ std::numeric\_limits<volatile\ T>,\ and}}
\DoxyCodeLine{00128\ \textcolor{comment}{//\ std::numeric\_limits<const\ volatile\ T>}}
\DoxyCodeLine{00129\ \textcolor{comment}{//\ https://stackoverflow.com/a/16519653/}}
\DoxyCodeLine{00130\ \textcolor{keyword}{template}<>}
\DoxyCodeLine{00131\ \textcolor{keyword}{struct\ }numeric\_limits<const\ \mbox{\hyperlink{namespace_eigen}{Eigen}}::bfloat16>\ :\ numeric\_limits<Eigen::bfloat16>\ \{\};}
\DoxyCodeLine{00132\ \textcolor{keyword}{template}<>}
\DoxyCodeLine{00133\ \textcolor{keyword}{struct\ }numeric\_limits<volatile\ \mbox{\hyperlink{namespace_eigen}{Eigen}}::bfloat16>\ :\ numeric\_limits<Eigen::bfloat16>\ \{\};}
\DoxyCodeLine{00134\ \textcolor{keyword}{template}<>}
\DoxyCodeLine{00135\ \textcolor{keyword}{struct\ }numeric\_limits<const\ volatile\ \mbox{\hyperlink{namespace_eigen}{Eigen}}::bfloat16>\ :\ numeric\_limits<Eigen::bfloat16>\ \{\};}
\DoxyCodeLine{00136\ \}\ \textcolor{comment}{//\ namespace\ std}}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_eigen}{Eigen}}\ \{}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \textcolor{keyword}{namespace\ }bfloat16\_impl\ \{}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \textcolor{comment}{//\ We\ need\ to\ distinguish\ ‘clang\ as\ the\ CUDA\ compiler’\ from\ ‘clang\ as\ the\ host\ compiler,}}
\DoxyCodeLine{00143\ \textcolor{comment}{//\ invoked\ by\ NVCC’\ (e.g.\ on\ MacOS).\ The\ former\ needs\ to\ see\ both\ host\ and\ device\ implementation}}
\DoxyCodeLine{00144\ \textcolor{comment}{//\ of\ the\ functions,\ while\ the\ latter\ can\ only\ deal\ with\ one\ of\ them.}}
\DoxyCodeLine{00145\ \textcolor{preprocessor}{\#if\ !defined(EIGEN\_HAS\_NATIVE\_BF16)\ ||\ (EIGEN\_COMP\_CLANG\ \&\&\ !EIGEN\_COMP\_NVCC)\ }\textcolor{comment}{//\ Emulate\ support\ for\ bfloat16\ floats}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \textcolor{preprocessor}{\#if\ EIGEN\_COMP\_CLANG\ \&\&\ defined(EIGEN\_CUDACC)}}
\DoxyCodeLine{00148\ \textcolor{comment}{//\ We\ need\ to\ provide\ emulated\ *host-\/side*\ BF16\ operators\ for\ clang.}}
\DoxyCodeLine{00149\ \textcolor{preprocessor}{\#pragma\ push\_macro("{}EIGEN\_DEVICE\_FUNC"{})}}
\DoxyCodeLine{00150\ \textcolor{preprocessor}{\#undef\ EIGEN\_DEVICE\_FUNC}}
\DoxyCodeLine{00151\ \textcolor{preprocessor}{\#if\ defined(EIGEN\_HAS\_CUDA\_BF16)\ \&\&\ defined(EIGEN\_HAS\_NATIVE\_BF16)}}
\DoxyCodeLine{00152\ \textcolor{preprocessor}{\#define\ EIGEN\_DEVICE\_FUNC\ \_\_host\_\_}}
\DoxyCodeLine{00153\ \textcolor{preprocessor}{\#else\ }\textcolor{comment}{//\ both\ host\ and\ device\ need\ emulated\ ops.}}
\DoxyCodeLine{00154\ \textcolor{preprocessor}{\#define\ EIGEN\_DEVICE\_FUNC\ \_\_host\_\_\ \_\_device\_\_}}
\DoxyCodeLine{00155\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00156\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \textcolor{comment}{//\ Definitions\ for\ CPUs,\ mostly\ working\ through\ conversion}}
\DoxyCodeLine{00159\ \textcolor{comment}{//\ to/from\ fp32.}}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ operator\ +\ (\textcolor{keyword}{const}\ bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00162\ \ \ \textcolor{keywordflow}{return}\ bfloat16(\textcolor{keywordtype}{float}(a)\ +\ \textcolor{keywordtype}{float}(b));}
\DoxyCodeLine{00163\ \}}
\DoxyCodeLine{00164\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ operator\ +\ (\textcolor{keyword}{const}\ bfloat16\&\ a,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\&\ b)\ \{}
\DoxyCodeLine{00165\ \ \ \textcolor{keywordflow}{return}\ bfloat16(\textcolor{keywordtype}{float}(a)\ +\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(b));}
\DoxyCodeLine{00166\ \}}
\DoxyCodeLine{00167\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ operator\ +\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00168\ \ \ \textcolor{keywordflow}{return}\ bfloat16(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(a)\ +\ \textcolor{keywordtype}{float}(b));}
\DoxyCodeLine{00169\ \}}
\DoxyCodeLine{00170\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ operator\ *\ (\textcolor{keyword}{const}\ bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00171\ \ \ \textcolor{keywordflow}{return}\ bfloat16(\textcolor{keywordtype}{float}(a)\ *\ \textcolor{keywordtype}{float}(b));}
\DoxyCodeLine{00172\ \}}
\DoxyCodeLine{00173\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ operator\ -\/\ (\textcolor{keyword}{const}\ bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00174\ \ \ \textcolor{keywordflow}{return}\ bfloat16(\textcolor{keywordtype}{float}(a)\ -\/\ \textcolor{keywordtype}{float}(b));}
\DoxyCodeLine{00175\ \}}
\DoxyCodeLine{00176\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ operator\ /\ (\textcolor{keyword}{const}\ bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00177\ \ \ \textcolor{keywordflow}{return}\ bfloat16(\textcolor{keywordtype}{float}(a)\ /\ \textcolor{keywordtype}{float}(b));}
\DoxyCodeLine{00178\ \}}
\DoxyCodeLine{00179\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ operator\ -\/\ (\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00180\ \ \ bfloat16\ result;}
\DoxyCodeLine{00181\ \ \ result.value\ =\ a.value\ \string^\ 0x8000;}
\DoxyCodeLine{00182\ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00183\ \}}
\DoxyCodeLine{00184\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\&\ operator\ +=\ (bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00185\ \ \ a\ =\ bfloat16(\textcolor{keywordtype}{float}(a)\ +\ \textcolor{keywordtype}{float}(b));}
\DoxyCodeLine{00186\ \ \ \textcolor{keywordflow}{return}\ a;}
\DoxyCodeLine{00187\ \}}
\DoxyCodeLine{00188\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\&\ operator\ *=\ (bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00189\ \ \ a\ =\ bfloat16(\textcolor{keywordtype}{float}(a)\ *\ \textcolor{keywordtype}{float}(b));}
\DoxyCodeLine{00190\ \ \ \textcolor{keywordflow}{return}\ a;}
\DoxyCodeLine{00191\ \}}
\DoxyCodeLine{00192\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\&\ operator\ -\/=\ (bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00193\ \ \ a\ =\ bfloat16(\textcolor{keywordtype}{float}(a)\ -\/\ \textcolor{keywordtype}{float}(b));}
\DoxyCodeLine{00194\ \ \ \textcolor{keywordflow}{return}\ a;}
\DoxyCodeLine{00195\ \}}
\DoxyCodeLine{00196\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\&\ operator\ /=\ (bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00197\ \ \ a\ =\ bfloat16(\textcolor{keywordtype}{float}(a)\ /\ \textcolor{keywordtype}{float}(b));}
\DoxyCodeLine{00198\ \ \ \textcolor{keywordflow}{return}\ a;}
\DoxyCodeLine{00199\ \}}
\DoxyCodeLine{00200\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ operator++(bfloat16\&\ a)\ \{}
\DoxyCodeLine{00201\ \ \ a\ +=\ bfloat16(1);}
\DoxyCodeLine{00202\ \ \ \textcolor{keywordflow}{return}\ a;}
\DoxyCodeLine{00203\ \}}
\DoxyCodeLine{00204\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ operator-\/-\/(bfloat16\&\ a)\ \{}
\DoxyCodeLine{00205\ \ \ a\ -\/=\ bfloat16(1);}
\DoxyCodeLine{00206\ \ \ \textcolor{keywordflow}{return}\ a;}
\DoxyCodeLine{00207\ \}}
\DoxyCodeLine{00208\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ operator++(bfloat16\&\ a,\ \textcolor{keywordtype}{int})\ \{}
\DoxyCodeLine{00209\ \ \ bfloat16\ original\_value\ =\ a;}
\DoxyCodeLine{00210\ \ \ ++a;}
\DoxyCodeLine{00211\ \ \ \textcolor{keywordflow}{return}\ original\_value;}
\DoxyCodeLine{00212\ \}}
\DoxyCodeLine{00213\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ operator-\/-\/(bfloat16\&\ a,\ \textcolor{keywordtype}{int})\ \{}
\DoxyCodeLine{00214\ \ \ bfloat16\ original\_value\ =\ a;}
\DoxyCodeLine{00215\ \ \ -\/-\/a;}
\DoxyCodeLine{00216\ \ \ \textcolor{keywordflow}{return}\ original\_value;}
\DoxyCodeLine{00217\ \}}
\DoxyCodeLine{00218\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ \textcolor{keywordtype}{bool}\ operator\ ==\ (\textcolor{keyword}{const}\ bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00219\ \ \ \textcolor{keywordflow}{return}\ numext::equal\_strict(\textcolor{keywordtype}{float}(a),\textcolor{keywordtype}{float}(b));}
\DoxyCodeLine{00220\ \}}
\DoxyCodeLine{00221\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ \textcolor{keywordtype}{bool}\ operator\ !=\ (\textcolor{keyword}{const}\ bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00222\ \ \ \textcolor{keywordflow}{return}\ numext::not\_equal\_strict(\textcolor{keywordtype}{float}(a),\ \textcolor{keywordtype}{float}(b));}
\DoxyCodeLine{00223\ \}}
\DoxyCodeLine{00224\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ \textcolor{keywordtype}{bool}\ operator\ <\ (\textcolor{keyword}{const}\ bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00225\ \ \ \textcolor{keywordflow}{return}\ float(a)\ <\ float(b);}
\DoxyCodeLine{00226\ \}}
\DoxyCodeLine{00227\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ \textcolor{keywordtype}{bool}\ operator\ <=\ (\textcolor{keyword}{const}\ bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00228\ \ \ \textcolor{keywordflow}{return}\ float(a)\ <=\ float(b);}
\DoxyCodeLine{00229\ \}}
\DoxyCodeLine{00230\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ \textcolor{keywordtype}{bool}\ operator\ >\ (\textcolor{keyword}{const}\ bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00231\ \ \ \textcolor{keywordflow}{return}\ float(a)\ >\ float(b);}
\DoxyCodeLine{00232\ \}}
\DoxyCodeLine{00233\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ \textcolor{keywordtype}{bool}\ operator\ >=\ (\textcolor{keyword}{const}\ bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00234\ \ \ \textcolor{keywordflow}{return}\ float(a)\ >=\ float(b);}
\DoxyCodeLine{00235\ \}}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \textcolor{preprocessor}{\#if\ EIGEN\_COMP\_CLANG\ \&\&\ defined(EIGEN\_CUDACC)}}
\DoxyCodeLine{00238\ \textcolor{preprocessor}{\#pragma\ pop\_macro("{}EIGEN\_DEVICE\_FUNC"{})}}
\DoxyCodeLine{00239\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00240\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ Emulate\ support\ for\ bfloat16\ floats}}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \textcolor{comment}{//\ Division\ by\ an\ index.\ Do\ it\ in\ full\ float\ precision\ to\ avoid\ accuracy}}
\DoxyCodeLine{00243\ \textcolor{comment}{//\ issues\ in\ converting\ the\ denominator\ to\ bfloat16.}}
\DoxyCodeLine{00244\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ operator\ /\ (\textcolor{keyword}{const}\ bfloat16\&\ a,\ \mbox{\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ b)\ \{}
\DoxyCodeLine{00245\ \ \ \textcolor{keywordflow}{return}\ bfloat16(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(a)\ /\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(b));}
\DoxyCodeLine{00246\ \}}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ \_\_bfloat16\_raw\ truncate\_to\_bfloat16(\textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ v)\ \{}
\DoxyCodeLine{00249\ \ \ \_\_bfloat16\_raw\ output;}
\DoxyCodeLine{00250\ \ \ \textcolor{keywordflow}{if}\ (Eigen::numext::isnan\ EIGEN\_NOT\_A\_MACRO(v))\ \{}
\DoxyCodeLine{00251\ \ \ \ \ output.value\ =\ std::signbit(v)\ ?\ 0xFFC0:\ 0x7FC0;}
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{keywordflow}{return}\ output;}
\DoxyCodeLine{00253\ \ \ \}}
\DoxyCodeLine{00254\ \ \ \textcolor{keyword}{const}\ uint16\_t*\ p\ =\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }uint16\_t*\textcolor{keyword}{>}(\&v);}
\DoxyCodeLine{00255\ \textcolor{preprocessor}{\#if\ defined(\_\_BYTE\_ORDER\_\_)\ \&\&\ \_\_BYTE\_ORDER\_\_\ ==\ \_\_ORDER\_BIG\_ENDIAN\_\_}}
\DoxyCodeLine{00256\ \ \ output.value\ =\ p[0];}
\DoxyCodeLine{00257\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00258\ \ \ output.value\ =\ p[1];}
\DoxyCodeLine{00259\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00260\ \ \ \textcolor{keywordflow}{return}\ output;}
\DoxyCodeLine{00261\ \}}
\DoxyCodeLine{00262\ }
\DoxyCodeLine{00263\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ EIGEN\_CONSTEXPR\ \_\_bfloat16\_raw\ raw\_uint16\_to\_bfloat16(numext::uint16\_t\ value)\ \{}
\DoxyCodeLine{00264\ \ \ \textcolor{keywordflow}{return}\ \_\_bfloat16\_raw(value);}
\DoxyCodeLine{00265\ \}}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ EIGEN\_CONSTEXPR\ numext::uint16\_t\ raw\_bfloat16\_as\_uint16(\textcolor{keyword}{const}\ \_\_bfloat16\_raw\&\ bf)\ \{}
\DoxyCodeLine{00268\ \ \ \textcolor{keywordflow}{return}\ bf.value;}
\DoxyCodeLine{00269\ \}}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \textcolor{comment}{//\ float\_to\_bfloat16\_rtne\ template\ specialization\ that\ does\ not\ make\ any}}
\DoxyCodeLine{00272\ \textcolor{comment}{//\ assumption\ about\ the\ value\ of\ its\ function\ argument\ (ff).}}
\DoxyCodeLine{00273\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00274\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ \_\_bfloat16\_raw\ float\_to\_bfloat16\_rtne<false>(\textcolor{keywordtype}{float}\ ff)\ \{}
\DoxyCodeLine{00275\ \textcolor{preprocessor}{\#if\ (defined(EIGEN\_HAS\_CUDA\_BF16)\ \&\&\ defined(EIGEN\_HAS\_HIP\_BF16))}}
\DoxyCodeLine{00276\ \ \ \textcolor{comment}{//\ Nothing\ to\ do\ here}}
\DoxyCodeLine{00277\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00278\ \ \ \_\_bfloat16\_raw\ output;}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \ \ \textcolor{keywordflow}{if}\ (Eigen::numext::isnan\ EIGEN\_NOT\_A\_MACRO(ff))\ \{}
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{comment}{//\ If\ the\ value\ is\ a\ NaN,\ squash\ it\ to\ a\ qNaN\ with\ msb\ of\ fraction\ set,}}
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{comment}{//\ this\ makes\ sure\ after\ truncation\ we\ don't\ end\ up\ with\ an\ inf.}}
\DoxyCodeLine{00283\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{comment}{//\ qNaN\ magic:\ All\ exponent\ bits\ set\ +\ most\ significant\ bit\ of\ fraction}}
\DoxyCodeLine{00285\ \ \ \ \ \textcolor{comment}{//\ set.}}
\DoxyCodeLine{00286\ \ \ \ \ output.value\ =\ std::signbit(ff)\ ?\ 0xFFC0:\ 0x7FC0;}
\DoxyCodeLine{00287\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00288\ \ \ \ \ \textcolor{comment}{//\ Fast\ rounding\ algorithm\ that\ rounds\ a\ half\ value\ to\ nearest\ even.\ This}}
\DoxyCodeLine{00289\ \ \ \ \ \textcolor{comment}{//\ reduces\ expected\ error\ when\ we\ convert\ a\ large\ number\ of\ floats.\ Here}}
\DoxyCodeLine{00290\ \ \ \ \ \textcolor{comment}{//\ is\ how\ it\ works:}}
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00292\ \ \ \ \ \textcolor{comment}{//\ Definitions:}}
\DoxyCodeLine{00293\ \ \ \ \ \textcolor{comment}{//\ To\ convert\ a\ float\ 32\ to\ bfloat16,\ a\ float\ 32\ can\ be\ viewed\ as\ 32\ bits}}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{comment}{//\ with\ the\ following\ tags:}}
\DoxyCodeLine{00295\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{comment}{//\ Sign\ |\ \ Exp\ (8\ bits)\ |\ Frac\ (23\ bits)}}
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{comment}{//\ \ S\ \ \ \ \ EEEEEEEE\ \ \ \ \ \ \ \ \ FFFFFFLRTTTTTTTTTTTTTTT}}
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00299\ \ \ \ \ \textcolor{comment}{//\ \ S:\ Sign\ bit.}}
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{comment}{//\ \ E:\ Exponent\ bits.}}
\DoxyCodeLine{00301\ \ \ \ \ \textcolor{comment}{//\ \ F:\ First\ 6\ bits\ of\ fraction.}}
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{comment}{//\ \ L:\ Least\ significant\ bit\ of\ resulting\ bfloat16\ if\ we\ truncate\ away\ the}}
\DoxyCodeLine{00303\ \ \ \ \ \textcolor{comment}{//\ \ rest\ of\ the\ float32.\ This\ is\ also\ the\ 7th\ bit\ of\ fraction}}
\DoxyCodeLine{00304\ \ \ \ \ \textcolor{comment}{//\ \ R:\ Rounding\ bit,\ 8th\ bit\ of\ fraction.}}
\DoxyCodeLine{00305\ \ \ \ \ \textcolor{comment}{//\ \ T:\ Sticky\ bits,\ rest\ of\ fraction,\ 15\ bits.}}
\DoxyCodeLine{00306\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00307\ \ \ \ \ \textcolor{comment}{//\ To\ round\ half\ to\ nearest\ even,\ there\ are\ 3\ cases\ where\ we\ want\ to\ round}}
\DoxyCodeLine{00308\ \ \ \ \ \textcolor{comment}{//\ down\ (simply\ truncate\ the\ result\ of\ the\ bits\ away,\ which\ consists\ of}}
\DoxyCodeLine{00309\ \ \ \ \ \textcolor{comment}{//\ rounding\ bit\ and\ sticky\ bits)\ and\ two\ cases\ where\ we\ want\ to\ round\ up}}
\DoxyCodeLine{00310\ \ \ \ \ \textcolor{comment}{//\ (truncate\ then\ add\ one\ to\ the\ result).}}
\DoxyCodeLine{00311\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{comment}{//\ The\ fast\ converting\ algorithm\ simply\ adds\ lsb\ (L)\ to\ 0x7fff\ (15\ bits\ of}}
\DoxyCodeLine{00313\ \ \ \ \ \textcolor{comment}{//\ 1s)\ as\ the\ rounding\ bias,\ adds\ the\ rounding\ bias\ to\ the\ input,\ then}}
\DoxyCodeLine{00314\ \ \ \ \ \textcolor{comment}{//\ truncates\ the\ last\ 16\ bits\ away.}}
\DoxyCodeLine{00315\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00316\ \ \ \ \ \textcolor{comment}{//\ To\ understand\ how\ it\ works,\ we\ can\ analyze\ this\ algorithm\ case\ by\ case:}}
\DoxyCodeLine{00317\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00318\ \ \ \ \ \textcolor{comment}{//\ 1.\ L\ =\ 0,\ R\ =\ 0:}}
\DoxyCodeLine{00319\ \ \ \ \ \textcolor{comment}{//\ \ \ Expect:\ round\ down,\ this\ is\ less\ than\ half\ value.}}
\DoxyCodeLine{00320\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00321\ \ \ \ \ \textcolor{comment}{//\ \ \ Algorithm:}}
\DoxyCodeLine{00322\ \ \ \ \ \textcolor{comment}{//\ \ \ -\/\ Rounding\ bias:\ 0x7fff\ +\ 0\ =\ 0x7fff}}
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{comment}{//\ \ \ -\/\ Adding\ rounding\ bias\ to\ input\ may\ create\ any\ carry,\ depending\ on}}
\DoxyCodeLine{00324\ \ \ \ \ \textcolor{comment}{//\ \ \ whether\ there\ is\ any\ value\ set\ to\ 1\ in\ T\ bits.}}
\DoxyCodeLine{00325\ \ \ \ \ \textcolor{comment}{//\ \ \ -\/\ R\ may\ be\ set\ to\ 1\ if\ there\ is\ a\ carry.}}
\DoxyCodeLine{00326\ \ \ \ \ \textcolor{comment}{//\ \ \ -\/\ L\ remains\ 0.}}
\DoxyCodeLine{00327\ \ \ \ \ \textcolor{comment}{//\ \ \ -\/\ Note\ that\ this\ case\ also\ handles\ Inf\ and\ -\/Inf,\ where\ all\ fraction}}
\DoxyCodeLine{00328\ \ \ \ \ \textcolor{comment}{//\ \ \ bits,\ including\ L,\ R\ and\ Ts\ are\ all\ 0.\ The\ output\ remains\ Inf\ after}}
\DoxyCodeLine{00329\ \ \ \ \ \textcolor{comment}{//\ \ \ this\ algorithm.}}
\DoxyCodeLine{00330\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{comment}{//\ 2.\ L\ =\ 1,\ R\ =\ 0:}}
\DoxyCodeLine{00332\ \ \ \ \ \textcolor{comment}{//\ \ \ Expect:\ round\ down,\ this\ is\ less\ than\ half\ value.}}
\DoxyCodeLine{00333\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00334\ \ \ \ \ \textcolor{comment}{//\ \ \ Algorithm:}}
\DoxyCodeLine{00335\ \ \ \ \ \textcolor{comment}{//\ \ \ -\/\ Rounding\ bias:\ 0x7fff\ +\ 1\ =\ 0x8000}}
\DoxyCodeLine{00336\ \ \ \ \ \textcolor{comment}{//\ \ \ -\/\ Adding\ rounding\ bias\ to\ input\ doesn't\ change\ sticky\ bits\ but}}
\DoxyCodeLine{00337\ \ \ \ \ \textcolor{comment}{//\ \ \ adds\ 1\ to\ rounding\ bit.}}
\DoxyCodeLine{00338\ \ \ \ \ \textcolor{comment}{//\ \ \ -\/\ L\ remains\ 1.}}
\DoxyCodeLine{00339\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00340\ \ \ \ \ \textcolor{comment}{//\ 3.\ L\ =\ 0,\ R\ =\ 1,\ all\ of\ T\ are\ 0:}}
\DoxyCodeLine{00341\ \ \ \ \ \textcolor{comment}{//\ \ \ Expect:\ round\ down,\ this\ is\ exactly\ at\ half,\ the\ result\ is\ already}}
\DoxyCodeLine{00342\ \ \ \ \ \textcolor{comment}{//\ \ \ even\ (L=0).}}
\DoxyCodeLine{00343\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00344\ \ \ \ \ \textcolor{comment}{//\ \ \ Algorithm:}}
\DoxyCodeLine{00345\ \ \ \ \ \textcolor{comment}{//\ \ \ -\/\ Rounding\ bias:\ 0x7fff\ +\ 0\ =\ 0x7fff}}
\DoxyCodeLine{00346\ \ \ \ \ \textcolor{comment}{//\ \ \ -\/\ Adding\ rounding\ bias\ to\ input\ sets\ all\ sticky\ bits\ to\ 1,\ but}}
\DoxyCodeLine{00347\ \ \ \ \ \textcolor{comment}{//\ \ \ doesn't\ create\ a\ carry.}}
\DoxyCodeLine{00348\ \ \ \ \ \textcolor{comment}{//\ \ \ -\/\ R\ remains\ 1.}}
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{comment}{//\ \ \ -\/\ L\ remains\ 0.}}
\DoxyCodeLine{00350\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00351\ \ \ \ \ \textcolor{comment}{//\ 4.\ L\ =\ 1,\ R\ =\ 1:}}
\DoxyCodeLine{00352\ \ \ \ \ \textcolor{comment}{//\ \ \ Expect:\ round\ up,\ this\ is\ exactly\ at\ half,\ the\ result\ needs\ to\ be}}
\DoxyCodeLine{00353\ \ \ \ \ \textcolor{comment}{//\ \ \ round\ to\ the\ next\ even\ number.}}
\DoxyCodeLine{00354\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00355\ \ \ \ \ \textcolor{comment}{//\ \ \ Algorithm:}}
\DoxyCodeLine{00356\ \ \ \ \ \textcolor{comment}{//\ \ \ -\/\ Rounding\ bias:\ 0x7fff\ +\ 1\ =\ 0x8000}}
\DoxyCodeLine{00357\ \ \ \ \ \textcolor{comment}{//\ \ \ -\/\ Adding\ rounding\ bias\ to\ input\ doesn't\ change\ sticky\ bits,\ but}}
\DoxyCodeLine{00358\ \ \ \ \ \textcolor{comment}{//\ \ \ creates\ a\ carry\ from\ rounding\ bit.}}
\DoxyCodeLine{00359\ \ \ \ \ \textcolor{comment}{//\ \ \ -\/\ The\ carry\ sets\ L\ to\ 0,\ creates\ another\ carry\ bit\ and\ propagate}}
\DoxyCodeLine{00360\ \ \ \ \ \textcolor{comment}{//\ \ \ forward\ to\ F\ bits.}}
\DoxyCodeLine{00361\ \ \ \ \ \textcolor{comment}{//\ \ \ -\/\ If\ all\ the\ F\ bits\ are\ 1,\ a\ carry\ then\ propagates\ to\ the\ exponent}}
\DoxyCodeLine{00362\ \ \ \ \ \textcolor{comment}{//\ \ \ bits,\ which\ then\ creates\ the\ minimum\ value\ with\ the\ next\ exponent}}
\DoxyCodeLine{00363\ \ \ \ \ \textcolor{comment}{//\ \ \ value.\ Note\ that\ we\ won't\ have\ the\ case\ where\ exponents\ are\ all\ 1,}}
\DoxyCodeLine{00364\ \ \ \ \ \textcolor{comment}{//\ \ \ since\ that's\ either\ a\ NaN\ (handled\ in\ the\ other\ if\ condition)\ or\ inf}}
\DoxyCodeLine{00365\ \ \ \ \ \textcolor{comment}{//\ \ \ (handled\ in\ case\ 1).}}
\DoxyCodeLine{00366\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00367\ \ \ \ \ \textcolor{comment}{//\ 5.\ L\ =\ 0,\ R\ =\ 1,\ any\ of\ T\ is\ 1:}}
\DoxyCodeLine{00368\ \ \ \ \ \textcolor{comment}{//\ \ \ Expect:\ round\ up,\ this\ is\ greater\ than\ half.}}
\DoxyCodeLine{00369\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00370\ \ \ \ \ \textcolor{comment}{//\ \ \ Algorithm:}}
\DoxyCodeLine{00371\ \ \ \ \ \textcolor{comment}{//\ \ \ -\/\ Rounding\ bias:\ 0x7fff\ +\ 0\ =\ 0x7fff}}
\DoxyCodeLine{00372\ \ \ \ \ \textcolor{comment}{//\ \ \ -\/\ Adding\ rounding\ bias\ to\ input\ creates\ a\ carry\ from\ sticky\ bits,}}
\DoxyCodeLine{00373\ \ \ \ \ \textcolor{comment}{//\ \ \ sets\ rounding\ bit\ to\ 0,\ then\ create\ another\ carry.}}
\DoxyCodeLine{00374\ \ \ \ \ \textcolor{comment}{//\ \ \ -\/\ The\ second\ carry\ sets\ L\ to\ 1.}}
\DoxyCodeLine{00375\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00376\ \ \ \ \ \textcolor{comment}{//\ Examples:}}
\DoxyCodeLine{00377\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00378\ \ \ \ \ \textcolor{comment}{//\ \ Exact\ half\ value\ that\ is\ already\ even:}}
\DoxyCodeLine{00379\ \ \ \ \ \textcolor{comment}{//\ \ \ \ Input:}}
\DoxyCodeLine{00380\ \ \ \ \ \textcolor{comment}{//\ \ \ \ Sign\ |\ \ Exp\ (8\ bit)\ \ \ \ \ |\ Frac\ (first\ 7\ bit)\ |\ Frac\ (last\ 16\ bit)}}
\DoxyCodeLine{00381\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ S\ \ \ \ \ E\ E\ E\ E\ E\ E\ E\ E\ \ \ \ \ \ F\ F\ F\ F\ F\ F\ L\ \ \ \ \ RTTTTTTTTTTTTTTT}}
\DoxyCodeLine{00382\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ 0\ \ \ \ \ 0\ 0\ 0\ 0\ 0\ 0\ 0\ 0\ \ \ \ \ \ 0\ 0\ 0\ 0\ 0\ 1\ 0\ \ \ \ \ 1000000000000000}}
\DoxyCodeLine{00383\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00384\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ This\ falls\ into\ case\ 3.\ We\ truncate\ the\ rest\ of\ 16\ bits\ and\ no}}
\DoxyCodeLine{00385\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ carry\ is\ created\ into\ F\ and\ L:}}
\DoxyCodeLine{00386\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00387\ \ \ \ \ \textcolor{comment}{//\ \ \ \ Output:}}
\DoxyCodeLine{00388\ \ \ \ \ \textcolor{comment}{//\ \ \ \ Sign\ |\ \ Exp\ (8\ bit)\ \ \ \ \ |\ Frac\ (first\ 7\ bit)}}
\DoxyCodeLine{00389\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ S\ \ \ \ \ E\ E\ E\ E\ E\ E\ E\ E\ \ \ \ \ \ F\ F\ F\ F\ F\ F\ L}}
\DoxyCodeLine{00390\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ 0\ \ \ \ \ 0\ 0\ 0\ 0\ 0\ 0\ 0\ 0\ \ \ \ \ \ 0\ 0\ 0\ 0\ 0\ 1\ 0}}
\DoxyCodeLine{00391\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00392\ \ \ \ \ \textcolor{comment}{//\ \ Exact\ half\ value,\ round\ to\ next\ even\ number:}}
\DoxyCodeLine{00393\ \ \ \ \ \textcolor{comment}{//\ \ \ \ Input:}}
\DoxyCodeLine{00394\ \ \ \ \ \textcolor{comment}{//\ \ \ \ Sign\ |\ \ Exp\ (8\ bit)\ \ \ \ \ |\ Frac\ (first\ 7\ bit)\ |\ Frac\ (last\ 16\ bit)}}
\DoxyCodeLine{00395\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ S\ \ \ \ \ E\ E\ E\ E\ E\ E\ E\ E\ \ \ \ \ \ F\ F\ F\ F\ F\ F\ L\ \ \ \ \ RTTTTTTTTTTTTTTT}}
\DoxyCodeLine{00396\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ 0\ \ \ \ \ 0\ 0\ 0\ 0\ 0\ 0\ 0\ 0\ \ \ \ \ \ 0\ 0\ 0\ 0\ 0\ 0\ 1\ \ \ \ \ 1000000000000000}}
\DoxyCodeLine{00397\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00398\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ This\ falls\ into\ case\ 4.\ We\ create\ a\ carry\ from\ R\ and\ T,}}
\DoxyCodeLine{00399\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ which\ then\ propagates\ into\ L\ and\ F:}}
\DoxyCodeLine{00400\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00401\ \ \ \ \ \textcolor{comment}{//\ \ \ \ Output:}}
\DoxyCodeLine{00402\ \ \ \ \ \textcolor{comment}{//\ \ \ \ Sign\ |\ \ Exp\ (8\ bit)\ \ \ \ \ |\ Frac\ (first\ 7\ bit)}}
\DoxyCodeLine{00403\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ S\ \ \ \ \ E\ E\ E\ E\ E\ E\ E\ E\ \ \ \ \ \ F\ F\ F\ F\ F\ F\ L}}
\DoxyCodeLine{00404\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ 0\ \ \ \ \ 0\ 0\ 0\ 0\ 0\ 0\ 0\ 0\ \ \ \ \ \ 0\ 0\ 0\ 0\ 0\ 1\ 0}}
\DoxyCodeLine{00405\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00406\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00407\ \ \ \ \ \textcolor{comment}{//\ \ Max\ denormal\ value\ round\ to\ min\ normal\ value:}}
\DoxyCodeLine{00408\ \ \ \ \ \textcolor{comment}{//\ \ \ \ Input:}}
\DoxyCodeLine{00409\ \ \ \ \ \textcolor{comment}{//\ \ \ \ Sign\ |\ \ Exp\ (8\ bit)\ \ \ \ \ |\ Frac\ (first\ 7\ bit)\ |\ Frac\ (last\ 16\ bit)}}
\DoxyCodeLine{00410\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ S\ \ \ \ \ E\ E\ E\ E\ E\ E\ E\ E\ \ \ \ \ \ F\ F\ F\ F\ F\ F\ L\ \ \ \ \ RTTTTTTTTTTTTTTT}}
\DoxyCodeLine{00411\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ 0\ \ \ \ \ 0\ 0\ 0\ 0\ 0\ 0\ 0\ 0\ \ \ \ \ \ 1\ 1\ 1\ 1\ 1\ 1\ 1\ \ \ \ \ 1111111111111111}}
\DoxyCodeLine{00412\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00413\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ This\ falls\ into\ case\ 4.\ We\ create\ a\ carry\ from\ R\ and\ T,}}
\DoxyCodeLine{00414\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ propagate\ into\ L\ and\ F,\ which\ then\ propagates\ into\ exponent}}
\DoxyCodeLine{00415\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ bits:}}
\DoxyCodeLine{00416\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00417\ \ \ \ \ \textcolor{comment}{//\ \ \ \ Output:}}
\DoxyCodeLine{00418\ \ \ \ \ \textcolor{comment}{//\ \ \ \ Sign\ |\ \ Exp\ (8\ bit)\ \ \ \ \ |\ Frac\ (first\ 7\ bit)}}
\DoxyCodeLine{00419\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ S\ \ \ \ \ E\ E\ E\ E\ E\ E\ E\ E\ \ \ \ \ \ F\ F\ F\ F\ F\ F\ L}}
\DoxyCodeLine{00420\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ 0\ \ \ \ \ 0\ 0\ 0\ 0\ 0\ 0\ 0\ 1\ \ \ \ \ \ 0\ 0\ 0\ 0\ 0\ 0\ 0}}
\DoxyCodeLine{00421\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00422\ \ \ \ \ \textcolor{comment}{//\ \ Max\ normal\ value\ round\ to\ Inf:}}
\DoxyCodeLine{00423\ \ \ \ \ \textcolor{comment}{//\ \ \ \ Input:}}
\DoxyCodeLine{00424\ \ \ \ \ \textcolor{comment}{//\ \ \ \ Sign\ |\ \ Exp\ (8\ bit)\ \ \ \ \ |\ Frac\ (first\ 7\ bit)\ |\ Frac\ (last\ 16\ bit)}}
\DoxyCodeLine{00425\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ S\ \ \ \ \ E\ E\ E\ E\ E\ E\ E\ E\ \ \ \ \ \ F\ F\ F\ F\ F\ F\ L\ \ \ \ \ RTTTTTTTTTTTTTTT}}
\DoxyCodeLine{00426\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ 0\ \ \ \ \ 1\ 1\ 1\ 1\ 1\ 1\ 1\ 0\ \ \ \ \ \ 1\ 1\ 1\ 1\ 1\ 1\ 1\ \ \ \ \ 1111111111111111}}
\DoxyCodeLine{00427\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00428\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ This\ falls\ into\ case\ 4.\ We\ create\ a\ carry\ from\ R\ and\ T,}}
\DoxyCodeLine{00429\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ propagate\ into\ L\ and\ F,\ which\ then\ propagates\ into\ exponent}}
\DoxyCodeLine{00430\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ bits:}}
\DoxyCodeLine{00431\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00432\ \ \ \ \ \textcolor{comment}{//\ \ \ \ Sign\ |\ \ Exp\ (8\ bit)\ \ \ \ \ |\ Frac\ (first\ 7\ bit)}}
\DoxyCodeLine{00433\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ S\ \ \ \ \ E\ E\ E\ E\ E\ E\ E\ E\ \ \ \ \ \ F\ F\ F\ F\ F\ F\ L}}
\DoxyCodeLine{00434\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ 0\ \ \ \ \ 1\ 1\ 1\ 1\ 1\ 1\ 1\ 1\ \ \ \ \ \ 0\ 0\ 0\ 0\ 0\ 0\ 0}}
\DoxyCodeLine{00435\ }
\DoxyCodeLine{00436\ \ \ \ \ \textcolor{comment}{//\ At\ this\ point,\ ff\ must\ be\ either\ a\ normal\ float,\ or\ +/-\/infinity.}}
\DoxyCodeLine{00437\ \ \ \ \ output\ =\ float\_to\_bfloat16\_rtne<true>(ff);}
\DoxyCodeLine{00438\ \ \ \}}
\DoxyCodeLine{00439\ \ \ \textcolor{keywordflow}{return}\ output;}
\DoxyCodeLine{00440\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00441\ \}}
\DoxyCodeLine{00442\ }
\DoxyCodeLine{00443\ \textcolor{comment}{//\ float\_to\_bfloat16\_rtne\ template\ specialization\ that\ assumes\ that\ its\ function}}
\DoxyCodeLine{00444\ \textcolor{comment}{//\ argument\ (ff)\ is\ either\ a\ normal\ floating\ point\ number,\ or\ +/-\/infinity,\ or}}
\DoxyCodeLine{00445\ \textcolor{comment}{//\ zero.\ Used\ to\ improve\ the\ runtime\ performance\ of\ conversion\ from\ an\ integer}}
\DoxyCodeLine{00446\ \textcolor{comment}{//\ type\ to\ bfloat16.}}
\DoxyCodeLine{00447\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00448\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ \_\_bfloat16\_raw\ float\_to\_bfloat16\_rtne<true>(\textcolor{keywordtype}{float}\ ff)\ \{}
\DoxyCodeLine{00449\ \textcolor{preprocessor}{\#if\ (defined(EIGEN\_HAS\_CUDA\_BF16)\ \&\&\ defined(EIGEN\_HAS\_HIP\_BF16))}}
\DoxyCodeLine{00450\ \ \ \ \ \textcolor{comment}{//\ Nothing\ to\ do\ here}}
\DoxyCodeLine{00451\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00452\ \ \ \ \ numext::uint32\_t\ input\ =\ numext::bit\_cast<numext::uint32\_t>(ff);}
\DoxyCodeLine{00453\ \ \ \ \ \_\_bfloat16\_raw\ output;}
\DoxyCodeLine{00454\ }
\DoxyCodeLine{00455\ \ \ \ \ \textcolor{comment}{//\ Least\ significant\ bit\ of\ resulting\ bfloat.}}
\DoxyCodeLine{00456\ \ \ \ \ numext::uint32\_t\ lsb\ =\ (input\ >>\ 16)\ \&\ 1;}
\DoxyCodeLine{00457\ \ \ \ \ numext::uint32\_t\ rounding\_bias\ =\ 0x7fff\ +\ lsb;}
\DoxyCodeLine{00458\ \ \ \ \ input\ +=\ rounding\_bias;}
\DoxyCodeLine{00459\ \ \ \ \ output.value\ =\ \textcolor{keyword}{static\_cast<}numext::uint16\_t\textcolor{keyword}{>}(input\ >>\ 16);}
\DoxyCodeLine{00460\ \ \ \ \ \textcolor{keywordflow}{return}\ output;}
\DoxyCodeLine{00461\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00462\ \}}
\DoxyCodeLine{00463\ }
\DoxyCodeLine{00464\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ \textcolor{keywordtype}{float}\ bfloat16\_to\_float(\_\_bfloat16\_raw\ h)\ \{}
\DoxyCodeLine{00465\ \ \ \ \ \textcolor{keywordtype}{float}\ result\ =\ 0;}
\DoxyCodeLine{00466\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}*\ q\ =\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}*\textcolor{keyword}{>}(\&result);}
\DoxyCodeLine{00467\ \textcolor{preprocessor}{\#if\ defined(\_\_BYTE\_ORDER\_\_)\ \&\&\ \_\_BYTE\_ORDER\_\_\ ==\ \_\_ORDER\_BIG\_ENDIAN\_\_}}
\DoxyCodeLine{00468\ \ \ \ \ q[0]\ =\ h.\mbox{\hyperlink{class_eigen_1_1_dense_base_a8da735a6bfc7012606acf787156d10a0}{value}};}
\DoxyCodeLine{00469\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00470\ \ \ \ \ q[1]\ =\ h.value;}
\DoxyCodeLine{00471\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00472\ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00473\ \}}
\DoxyCodeLine{00474\ \textcolor{comment}{//\ -\/-\/-\/\ standard\ functions\ -\/-\/-\/}}
\DoxyCodeLine{00475\ }
\DoxyCodeLine{00476\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bool\ (isinf)(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00477\ \ \ EIGEN\_USING\_STD(isinf);}
\DoxyCodeLine{00478\ \ \ \textcolor{keywordflow}{return}\ (isinf)(float(a));}
\DoxyCodeLine{00479\ \}}
\DoxyCodeLine{00480\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bool\ (isnan)(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00481\ \ \ EIGEN\_USING\_STD(isnan);}
\DoxyCodeLine{00482\ \ \ \textcolor{keywordflow}{return}\ (isnan)(float(a));}
\DoxyCodeLine{00483\ \}}
\DoxyCodeLine{00484\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bool\ (isfinite)(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00485\ \ \ \textcolor{keywordflow}{return}\ !(isinf\ EIGEN\_NOT\_A\_MACRO\ (a))\ \&\&\ !(isnan\ EIGEN\_NOT\_A\_MACRO\ (a));}
\DoxyCodeLine{00486\ \}}
\DoxyCodeLine{00487\ }
\DoxyCodeLine{00488\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ abs(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00489\ \ \ bfloat16\ result;}
\DoxyCodeLine{00490\ \ \ result.value\ =\ a.\mbox{\hyperlink{class_eigen_1_1_dense_base_a8da735a6bfc7012606acf787156d10a0}{value}}\ \&\ 0x7FFF;}
\DoxyCodeLine{00491\ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00492\ \}}
\DoxyCodeLine{00493\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ exp(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00494\ \ \ \ \textcolor{keywordflow}{return}\ bfloat16(::expf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00495\ \}}
\DoxyCodeLine{00496\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ expm1(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00497\ \ \ \textcolor{keywordflow}{return}\ bfloat16(numext::expm1(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00498\ \}}
\DoxyCodeLine{00499\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ log(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00500\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::logf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00501\ \}}
\DoxyCodeLine{00502\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ log1p(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00503\ \ \ \textcolor{keywordflow}{return}\ bfloat16(numext::log1p(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00504\ \}}
\DoxyCodeLine{00505\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ log10(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00506\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::log10f(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00507\ \}}
\DoxyCodeLine{00508\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ log2(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00509\ \ \ \textcolor{keywordflow}{return}\ bfloat16(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(EIGEN\_LOG2E)\ *\ ::logf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00510\ \}}
\DoxyCodeLine{00511\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ sqrt(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00512\ \ \ \ \ \textcolor{keywordflow}{return}\ bfloat16(::sqrtf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00513\ \}}
\DoxyCodeLine{00514\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ pow(\textcolor{keyword}{const}\ bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00515\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::powf(\textcolor{keywordtype}{float}(a),\ \textcolor{keywordtype}{float}(b)));}
\DoxyCodeLine{00516\ \}}
\DoxyCodeLine{00517\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ sin(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00518\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::sinf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00519\ \}}
\DoxyCodeLine{00520\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ cos(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00521\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::cosf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00522\ \}}
\DoxyCodeLine{00523\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ tan(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00524\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::tanf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00525\ \}}
\DoxyCodeLine{00526\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ asin(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00527\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::asinf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00528\ \}}
\DoxyCodeLine{00529\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ acos(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00530\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::acosf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00531\ \}}
\DoxyCodeLine{00532\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ atan(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00533\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::atanf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00534\ \}}
\DoxyCodeLine{00535\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ sinh(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00536\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::sinhf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00537\ \}}
\DoxyCodeLine{00538\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ cosh(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00539\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::coshf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00540\ \}}
\DoxyCodeLine{00541\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ tanh(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00542\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::tanhf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00543\ \}}
\DoxyCodeLine{00544\ \textcolor{preprocessor}{\#if\ EIGEN\_HAS\_CXX11\_MATH}}
\DoxyCodeLine{00545\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ asinh(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00546\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::asinhf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00547\ \}}
\DoxyCodeLine{00548\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ acosh(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00549\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::acoshf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00550\ \}}
\DoxyCodeLine{00551\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ atanh(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00552\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::atanhf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00553\ \}}
\DoxyCodeLine{00554\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00555\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ floor(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00556\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::floorf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00557\ \}}
\DoxyCodeLine{00558\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ ceil(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00559\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::ceilf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00560\ \}}
\DoxyCodeLine{00561\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ rint(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00562\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::rintf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00563\ \}}
\DoxyCodeLine{00564\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ round(\textcolor{keyword}{const}\ bfloat16\&\ a)\ \{}
\DoxyCodeLine{00565\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::roundf(\textcolor{keywordtype}{float}(a)));}
\DoxyCodeLine{00566\ \}}
\DoxyCodeLine{00567\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ fmod(\textcolor{keyword}{const}\ bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00568\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::fmodf(\textcolor{keywordtype}{float}(a),\ \textcolor{keywordtype}{float}(b)));}
\DoxyCodeLine{00569\ \}}
\DoxyCodeLine{00570\ }
\DoxyCodeLine{00571\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ (min)(\textcolor{keyword}{const}\ bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00572\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ f1\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(a);}
\DoxyCodeLine{00573\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ f2\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(b);}
\DoxyCodeLine{00574\ \ \ \textcolor{keywordflow}{return}\ f2\ <\ f1\ ?\ b\ :\ a;}
\DoxyCodeLine{00575\ \}}
\DoxyCodeLine{00576\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ (max)(\textcolor{keyword}{const}\ bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00577\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ f1\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(a);}
\DoxyCodeLine{00578\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ f2\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(b);}
\DoxyCodeLine{00579\ \ \ \textcolor{keywordflow}{return}\ f1\ <\ f2\ ?\ b\ :\ a;}
\DoxyCodeLine{00580\ \}}
\DoxyCodeLine{00581\ }
\DoxyCodeLine{00582\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ fmin(\textcolor{keyword}{const}\ bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00583\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ f1\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(a);}
\DoxyCodeLine{00584\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ f2\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(b);}
\DoxyCodeLine{00585\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::fminf(f1,\ f2));}
\DoxyCodeLine{00586\ \}}
\DoxyCodeLine{00587\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ bfloat16\ fmax(\textcolor{keyword}{const}\ bfloat16\&\ a,\ \textcolor{keyword}{const}\ bfloat16\&\ b)\ \{}
\DoxyCodeLine{00588\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ f1\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(a);}
\DoxyCodeLine{00589\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ f2\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(b);}
\DoxyCodeLine{00590\ \ \ \textcolor{keywordflow}{return}\ bfloat16(::fmaxf(f1,\ f2));}
\DoxyCodeLine{00591\ \}}
\DoxyCodeLine{00592\ }
\DoxyCodeLine{00593\ \textcolor{preprocessor}{\#ifndef\ EIGEN\_NO\_IO}}
\DoxyCodeLine{00594\ EIGEN\_ALWAYS\_INLINE\ std::ostream\&\ operator\ <<\ (std::ostream\&\ os,\ \textcolor{keyword}{const}\ bfloat16\&\ v)\ \{}
\DoxyCodeLine{00595\ \ \ os\ <<\ static\_cast<float>(v);}
\DoxyCodeLine{00596\ \ \ \textcolor{keywordflow}{return}\ os;}
\DoxyCodeLine{00597\ \}}
\DoxyCodeLine{00598\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00599\ }
\DoxyCodeLine{00600\ \}\ \textcolor{comment}{//\ namespace\ bfloat16\_impl}}
\DoxyCodeLine{00601\ }
\DoxyCodeLine{00602\ \textcolor{keyword}{namespace\ }internal\ \{}
\DoxyCodeLine{00603\ }
\DoxyCodeLine{00604\ \textcolor{keyword}{template}<>}
\DoxyCodeLine{00605\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_eigen_1_1internal_1_1random__default__impl}{random\_default\_impl}}<\mbox{\hyperlink{struct_eigen_1_1bfloat16}{bfloat16}},\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{false}},\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{false}}>}
\DoxyCodeLine{00606\ \{}
\DoxyCodeLine{00607\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{bfloat16}}\ run(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{bfloat16}}\&\ x,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{bfloat16}}\&\ y)}
\DoxyCodeLine{00608\ \ \ \{}
\DoxyCodeLine{00609\ \ \ \ \ \textcolor{keywordflow}{return}\ x\ +\ (y-\/x)\ *\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{bfloat16}}(\textcolor{keywordtype}{float}(std::rand())\ /\ \mbox{\hyperlink{class_eigen_1_1_matrix_base}{float}}(\mbox{\hyperlink{class_eigen_1_1_matrix_base}{RAND\_MAX}}));}
\DoxyCodeLine{00610\ \ \ \}}
\DoxyCodeLine{00611\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{bfloat16}}\ run()}
\DoxyCodeLine{00612\ \ \ \{}
\DoxyCodeLine{00613\ \ \ \ \ \textcolor{keywordflow}{return}\ run(\mbox{\hyperlink{struct_eigen_1_1bfloat16}{bfloat16}}(-\/1.f),\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{bfloat16}}(1.f));}
\DoxyCodeLine{00614\ \ \ \}}
\DoxyCodeLine{00615\ \};}
\DoxyCodeLine{00616\ }
\DoxyCodeLine{00617\ \textcolor{keyword}{template}<>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_eigen_1_1internal_1_1is__arithmetic}{is\_arithmetic}}<\mbox{\hyperlink{struct_eigen_1_1bfloat16}{bfloat16}}>\ \{\ \textcolor{keyword}{enum}\ \{\ value\ =\ \textcolor{keyword}{true}\ \};\ \};}
\DoxyCodeLine{00618\ }
\DoxyCodeLine{00619\ \}\ \textcolor{comment}{//\ namespace\ internal}}
\DoxyCodeLine{00620\ }
\DoxyCodeLine{00621\ \textcolor{keyword}{template}<>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_eigen_1_1_num_traits}{NumTraits}}<\mbox{\hyperlink{namespace_eigen}{Eigen}}::\mbox{\hyperlink{struct_eigen_1_1bfloat16}{bfloat16}}>}
\DoxyCodeLine{00622\ \ \ \ \ :\ \mbox{\hyperlink{struct_eigen_1_1_generic_num_traits}{GenericNumTraits}}<Eigen::bfloat16>}
\DoxyCodeLine{00623\ \{}
\DoxyCodeLine{00624\ \ \ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00625\ \ \ \ \ IsSigned\ =\ \textcolor{keyword}{true},}
\DoxyCodeLine{00626\ \ \ \ \ IsInteger\ =\ \textcolor{keyword}{false},}
\DoxyCodeLine{00627\ \ \ \ \ IsComplex\ =\ \textcolor{keyword}{false},}
\DoxyCodeLine{00628\ \ \ \ \ RequireInitialization\ =\ \textcolor{keyword}{false}}
\DoxyCodeLine{00629\ \ \ \};}
\DoxyCodeLine{00630\ }
\DoxyCodeLine{00631\ \ \ EIGEN\_DEVICE\_FUNC\ EIGEN\_CONSTEXPR\ \textcolor{keyword}{static}\ EIGEN\_STRONG\_INLINE\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\ epsilon()\ \{}
\DoxyCodeLine{00632\ \ \ \ \ \textcolor{keywordflow}{return}\ bfloat16\_impl::raw\_uint16\_to\_bfloat16(0x3c00);}
\DoxyCodeLine{00633\ \ \ \}}
\DoxyCodeLine{00634\ \ \ EIGEN\_DEVICE\_FUNC\ EIGEN\_CONSTEXPR\ \textcolor{keyword}{static}\ EIGEN\_STRONG\_INLINE\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\ dummy\_precision()\ \{}
\DoxyCodeLine{00635\ \ \ \ \ \textcolor{keywordflow}{return}\ bfloat16\_impl::raw\_uint16\_to\_bfloat16(0x3D4D);\ \ \textcolor{comment}{//\ bfloat16(5e-\/2f);}}
\DoxyCodeLine{00636\ }
\DoxyCodeLine{00637\ \ \ \}}
\DoxyCodeLine{00638\ \ \ EIGEN\_DEVICE\_FUNC\ EIGEN\_CONSTEXPR\ \textcolor{keyword}{static}\ EIGEN\_STRONG\_INLINE\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\ highest()\ \{}
\DoxyCodeLine{00639\ \ \ \ \ \textcolor{keywordflow}{return}\ bfloat16\_impl::raw\_uint16\_to\_bfloat16(0x7F7F);}
\DoxyCodeLine{00640\ \ \ \}}
\DoxyCodeLine{00641\ \ \ EIGEN\_DEVICE\_FUNC\ EIGEN\_CONSTEXPR\ \textcolor{keyword}{static}\ EIGEN\_STRONG\_INLINE\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\ lowest()\ \{}
\DoxyCodeLine{00642\ \ \ \ \ \textcolor{keywordflow}{return}\ bfloat16\_impl::raw\_uint16\_to\_bfloat16(0xFF7F);}
\DoxyCodeLine{00643\ \ \ \}}
\DoxyCodeLine{00644\ \ \ EIGEN\_DEVICE\_FUNC\ EIGEN\_CONSTEXPR\ \textcolor{keyword}{static}\ EIGEN\_STRONG\_INLINE\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\ infinity()\ \{}
\DoxyCodeLine{00645\ \ \ \ \ \textcolor{keywordflow}{return}\ bfloat16\_impl::raw\_uint16\_to\_bfloat16(0x7f80);}
\DoxyCodeLine{00646\ \ \ \}}
\DoxyCodeLine{00647\ \ \ EIGEN\_DEVICE\_FUNC\ EIGEN\_CONSTEXPR\ \textcolor{keyword}{static}\ EIGEN\_STRONG\_INLINE\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\ quiet\_NaN()\ \{}
\DoxyCodeLine{00648\ \ \ \ \ \textcolor{keywordflow}{return}\ bfloat16\_impl::raw\_uint16\_to\_bfloat16(0x7fc0);}
\DoxyCodeLine{00649\ \ \ \}}
\DoxyCodeLine{00650\ \};}
\DoxyCodeLine{00651\ }
\DoxyCodeLine{00652\ \}\ \textcolor{comment}{//\ namespace\ Eigen}}
\DoxyCodeLine{00653\ }
\DoxyCodeLine{00654\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_eigen}{Eigen}}\ \{}
\DoxyCodeLine{00655\ \textcolor{keyword}{namespace\ }numext\ \{}
\DoxyCodeLine{00656\ }
\DoxyCodeLine{00657\ \textcolor{keyword}{template}<>}
\DoxyCodeLine{00658\ EIGEN\_DEVICE\_FUNC\ EIGEN\_ALWAYS\_INLINE}
\DoxyCodeLine{00659\ bool\ (isnan)(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\&\ h)\ \{}
\DoxyCodeLine{00660\ \ \ \textcolor{keywordflow}{return}\ (bfloat16\_impl::isnan)(h);}
\DoxyCodeLine{00661\ \}}
\DoxyCodeLine{00662\ }
\DoxyCodeLine{00663\ \textcolor{keyword}{template}<>}
\DoxyCodeLine{00664\ EIGEN\_DEVICE\_FUNC\ EIGEN\_ALWAYS\_INLINE}
\DoxyCodeLine{00665\ bool\ (isinf)(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\&\ h)\ \{}
\DoxyCodeLine{00666\ \ \ \textcolor{keywordflow}{return}\ (bfloat16\_impl::isinf)(h);}
\DoxyCodeLine{00667\ \}}
\DoxyCodeLine{00668\ }
\DoxyCodeLine{00669\ \textcolor{keyword}{template}<>}
\DoxyCodeLine{00670\ EIGEN\_DEVICE\_FUNC\ EIGEN\_ALWAYS\_INLINE}
\DoxyCodeLine{00671\ bool\ (isfinite)(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\&\ h)\ \{}
\DoxyCodeLine{00672\ \ \ \textcolor{keywordflow}{return}\ (bfloat16\_impl::isfinite)(h);}
\DoxyCodeLine{00673\ \}}
\DoxyCodeLine{00674\ }
\DoxyCodeLine{00675\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00676\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\ bit\_cast<Eigen::bfloat16,\ uint16\_t>(\textcolor{keyword}{const}\ uint16\_t\&\ src)\ \{}
\DoxyCodeLine{00677\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}(Eigen::bfloat16\_impl::raw\_uint16\_to\_bfloat16(src));}
\DoxyCodeLine{00678\ \}}
\DoxyCodeLine{00679\ }
\DoxyCodeLine{00680\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00681\ EIGEN\_STRONG\_INLINE\ EIGEN\_DEVICE\_FUNC\ uint16\_t\ bit\_cast<uint16\_t,\ Eigen::bfloat16>(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\&\ src)\ \{}
\DoxyCodeLine{00682\ \ \ \textcolor{keywordflow}{return}\ Eigen::bfloat16\_impl::raw\_bfloat16\_as\_uint16(src);}
\DoxyCodeLine{00683\ \}}
\DoxyCodeLine{00684\ }
\DoxyCodeLine{00685\ \}\ \ \textcolor{comment}{//\ namespace\ numext}}
\DoxyCodeLine{00686\ \}\ \ \textcolor{comment}{//\ namespace\ Eigen}}
\DoxyCodeLine{00687\ }
\DoxyCodeLine{00688\ \textcolor{preprocessor}{\#if\ EIGEN\_HAS\_STD\_HASH}}
\DoxyCodeLine{00689\ \textcolor{keyword}{namespace\ }std\ \{}
\DoxyCodeLine{00690\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00691\ \textcolor{keyword}{struct\ }hash<\mbox{\hyperlink{namespace_eigen}{Eigen}}::bfloat16>\ \{}
\DoxyCodeLine{00692\ \ \ EIGEN\_STRONG\_INLINE\ std::size\_t\ operator()(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_eigen_1_1bfloat16}{Eigen::bfloat16}}\&\ a)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00693\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}std::size\_t\textcolor{keyword}{>}(Eigen::numext::bit\_cast<Eigen::numext::uint16\_t>(a));}
\DoxyCodeLine{00694\ \ \ \}}
\DoxyCodeLine{00695\ \};}
\DoxyCodeLine{00696\ \}\ \textcolor{comment}{//\ namespace\ std}}
\DoxyCodeLine{00697\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00698\ }
\DoxyCodeLine{00699\ }
\DoxyCodeLine{00700\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ EIGEN\_BFLOAT16\_H}}

\end{DoxyCode}
